{% from 'macros.html' import poster_heading, capcode_author, get_image_src, get_image_src_on_error %}

<div id="{{ thread.no }}" class="thread doc_id_{{ thread.no }}"
    style="max-width: 300px; max-height: 375px; overflow: hidden; text-align: center;" tabindex="0">
    <div class="post_data">
        <span class="post_controls">
            [<a href="/{{ thread.board_shortname }}/thread/{{ thread.no }}" class="btnr parent" target="_blank">View</a>]
            [<a href="https://boards.4chan.org/{{ thread.board_shortname }}/thread/{{ thread.no }}" class="btnr parent" rel="noreferrer" target="_blank" >Source</a>]
        </span>
        <br/>
        <time datetime="{{ thread.time }}">{{ thread.now }}</time>
        <span class="post_number">
            <a href="/{{ thread.board_shortname }}/thread/{{ thread.no }}#p{{ thread.no }}" data-function="highlight" data-post="{{ thread.no }}">No. {{ thread.no }}</a>
        </span>
    </div>
    <a href="/{{ thread.board_shortname }}/thread/{{ thread.no }}" rel="noreferrer" target="_blank" class="thread_image_link" data-expand="true">  
        <img class="thumb thread_image"
            src="{{get_image_src(thread.board_shortname, thread, thumb_uri, image_uri)}}"
            data-md5="{{ thread.md5 }}"
            width="{{ thread.tn_w }}"
            height="{{ thread.tn_h }}"
            loading="lazy"
            onerror="{{get_image_src_on_error(thread.board_shortname, thread, thumb_uri, image_uri)}}"
        />
    </a>
    <div class="teaser">
        {% if thread.sub %}
            <span class="post_title">{{thread.sub | safe}}</span>:
        {% endif %}
        {{thread.com | safe}}
    </div>
</div>